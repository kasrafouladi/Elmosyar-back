<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ù¾Ø±ÙˆÙØ§ÛŒÙ„ {{ profile_user.username }}</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: Arial, sans-serif; background-color: #f5f5f5; }
        .container { max-width: 800px; margin: 0 auto; padding: 20px; }
        .back-link { display: inline-block; margin-bottom: 20px; color: #2196F3; text-decoration: none; }
        .back-link:hover { text-decoration: underline; }
        
        .profile-card { background: white; padding: 30px; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1); margin-bottom: 25px; }
        .profile-header { display: flex; align-items: center; gap: 25px; margin-bottom: 25px; padding-bottom: 25px; border-bottom: 2px solid #f0f0f0; }
        .profile-picture { width: 120px; height: 120px; border-radius: 50%; object-fit: cover; border: 3px solid #2196F3; }
        .profile-info h1 { color: #333; margin-bottom: 8px; font-size: 28px; }
        .profile-info .username { color: #666; font-size: 16px; margin-bottom: 15px; }
        .profile-stats { display: flex; gap: 20px; }
        .stat { text-align: center; }
        .stat-value { font-size: 20px; font-weight: bold; color: #2196F3; }
        .stat-label { font-size: 13px; color: #999; }
        
        .profile-details { margin-top: 20px; }
        .detail-row { margin-bottom: 15px; padding: 12px; background: #f9f9f9; border-radius: 6px; }
        .detail-label { font-weight: bold; color: #555; margin-bottom: 5px; }
        .detail-value { color: #333; line-height: 1.6; }
        
        .actions { display: flex; gap: 12px; margin-top: 25px; }
        .actions a { padding: 12px 24px; background: #2196F3; color: white; text-decoration: none; border-radius: 6px; text-align: center; transition: background 0.3s; }
        .actions a:hover { background: #0b7dda; }
        
        .empty-state { text-align: center; padding: 40px; color: #999; }
    </style>
</head>
<body>
    <div class="container">
        <a href="/" class="back-link">â† Ø¨Ø§Ø²Ú¯Ø´Øª Ø¨Ù‡ Ø®Ø§Ù†Ù‡</a>
        
        <div class="profile-card">
            <div class="profile-header">
                <img src="{% if profile_user.profile_picture %}{{ profile_user.profile_picture.url }}{% else %}data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='120' height='120' viewBox='0 0 120 120'%3E%3Crect fill='%23ddd' width='120' height='120'/%3E%3Ctext x='50%25' y='50%25' font-size='40' fill='%23999' text-anchor='middle' dy='.3em'%3EğŸ‘¤%3C/text%3E%3C/svg%3E{% endif %}" 
                     class="profile-picture" 
                     alt="Profile Picture">
                
                <div class="profile-info">
                    <h1>
                        {% if profile_user.first_name or profile_user.last_name %}
                            {{ profile_user.first_name }} {{ profile_user.last_name }}
                        {% else %}
                            {{ profile_user.username }}
                        {% endif %}
                    </h1>
                    <div class="username">@{{ profile_user.username }}</div>
                    
                    <div class="profile-stats" id="stats">
                        <div class="stat">
                            <div class="stat-value" id="posts-count">0</div>
                            <div class="stat-label">Ù¾Ø³Øª</div>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="profile-details">
                {% if profile_user.email %}
                <div class="detail-row">
                    <div class="detail-label">ğŸ“§ Ø§ÛŒÙ…ÛŒÙ„</div>
                    <div class="detail-value">{{ profile_user.email }}</div>
                </div>
                {% endif %}
                
                {% if profile_user.student_id %}
                <div class="detail-row">
                    <div class="detail-label">ğŸ“ Ø´Ù…Ø§Ø±Ù‡ Ø¯Ø§Ù†Ø´Ø¬ÙˆÛŒÛŒ</div>
                    <div class="detail-value">{{ profile_user.student_id }}</div>
                </div>
                {% endif %}
                
                {% if profile_user.bio %}
                <div class="detail-row">
                    <div class="detail-label">ğŸ“ Ø¨ÛŒÙˆÚ¯Ø±Ø§ÙÛŒ</div>
                    <div class="detail-value">{{ profile_user.bio }}</div>
                </div>
                {% endif %}
            </div>
            
            <div class="actions">
                <a href="/profiles/{{ profile_user.username }}/posts/">ğŸ“„ Ù…Ø´Ø§Ù‡Ø¯Ù‡ Ù¾Ø³Øªâ€ŒÙ‡Ø§</a>
            </div>
        </div>
    </div>

    <script>
        const API_BASE = window.location.origin;
        const username = "{{ profile_user.username }}";

        async function loadStats() {
            try {
                const res = await fetch(`${API_BASE}/api/users/${username}/posts/`, {credentials: 'include'});
                const data = await res.json();
                
                if (data.success) {
                    document.getElementById('posts-count').textContent = data.posts.length;
                }
            } catch (error) {
                console.error('Error loading stats:', error);
            }
        }

        loadStats();
    </script>
</body>
</html>